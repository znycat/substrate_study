"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getRandomValues = exports.packageInfo = void 0;
const react_native_1 = require("react-native");
const x_global_1 = require("@polkadot/x-global");
const base64_js_1 = require("./base64.js");
const browser_js_1 = require("./browser.js");
const fallback_js_1 = require("./fallback.js");
var packageInfo_js_1 = require("./packageInfo.js");
Object.defineProperty(exports, "packageInfo", { enumerable: true, get: function () { return packageInfo_js_1.packageInfo; } });
function getRandomValuesNative(output) {
    const bytes = (0, base64_js_1.base64Decode)(react_native_1.NativeModules.RNGetRandomValues
        ? react_native_1.NativeModules.RNGetRandomValues.getRandomBase64(output.length)
        : react_native_1.NativeModules.ExpoRandom.getRandomBase64String(output.length));
    for (let i = 0; i < bytes.length; i++) {
        output[i] = bytes[i];
    }
    return output;
}
exports.getRandomValues = (typeof x_global_1.xglobal.crypto === 'object' && typeof x_global_1.xglobal.crypto.getRandomValues === 'function'
    ? browser_js_1.getRandomValues
    : (typeof x_global_1.xglobal.nativeCallSyncHook === 'undefined' || !react_native_1.NativeModules.ExpoRandom)
        ? fallback_js_1.insecureRandomValues
        : getRandomValuesNative);
